<section class="section-sm">
  <div class="container">
    <div class="row">
      <app-products-breadcrumb>
        <li *ngIf="!isSearch()">Products</li>
        <li *ngIf="isSearch()">Search results for "{{filterState.widgetsState.searchTerm}}"</li>
      </app-products-breadcrumb>
      <div *ngIf="isSearch()" class="col-md-12">
        <div id="search-term-banner" class="search-result search-result-top">
          <p class="search-result-title">Your search results for:</p>
          <p class="search-result-term">"{{filterState.widgetsState.searchTerm}}"</p>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-3">
        <div class="category-sidebar">
          <app-widgets (onStateChanged)="setWidgetsState($event)">
          </app-widgets>
        </div>
      </div>

      <div class="col-lg-9 col-lg-push-3 col-xs-12">
        <div class="shop-content">

          <div *ngIf="isSearch()" class="search-result search-result-bottom">
            <p class="search-result-title">Your search results for:</p>
            <p class="search-result-term">"{{filterState.widgetsState.searchTerm}}"</p>
          </div>

          <app-products-control-panel [startItemsIndex]="getStartItemIndex()"
                                      [endItemsIndex]="getEndItemIndex()"
                                      [itemsCount]="productsTotalCount"
                                      [sortOption]="filterState.sortField"
                                      [viewType] = "selectedViewType"
                                      (onSelectViewType) = "selectViewType($event)"
                                      (onSelectSortOption) = "selectSortOption($event)">
          </app-products-control-panel>
          <div *ngIf="loading" id="load" style="z-index: 9990"></div>
          <div *ngIf="!loading" class="tab-content">
            <div [ngSwitch]="selectedViewType" class="tab-pane active">
              <div *ngSwitchCase="viewType.LIST" class="row mt-30">
                  <!-- product card -->
                <app-product-item-list *ngFor="let product of products; trackBy: trackProductFn"
                                       [product]="product"
                                       class="col-md-12">
                </app-product-item-list>
              </div>
              <div *ngSwitchCase="viewType.GRID" class="row mt-30">
                <!-- product card -->
                <app-product-item-grid *ngFor="let product of products; trackBy: trackProductFn"
                                       [product]="product"
                                       class="col-sm-12 col-lg-4 col-md-6">
                </app-product-item-grid>
              </div>
            </div>
          </div>
          <app-pagination *ngIf="!loading && pageSize < productsTotalCount"
                          [pageSize] = "pageSize"
                          [page] = "filterState.page"
                          [collectionSize] = "productsTotalCount"
                          (onPageSelect) = "selectPage($event)">
          </app-pagination>
        </div>
      </div>
    </div>
  </div>
</section>
